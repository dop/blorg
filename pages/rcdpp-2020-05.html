<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2022-11-07 Mon 21:28 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Intro to React Component Driver</title>
<meta name="author" content="Donatas Petrauskas" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="../assets/css/styles.css" type="text/css">
</head>
<body>
<div id="content" class="content">
<h1 class="title">Intro to React Component Driver
<br>
<span class="subtitle">Prezentacija Praktikantams</span>
</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#React-Component-Driver">1. React Component Driver</a></li>
<li><a href="#Agenda">2. Agenda</a></li>
<li><a href="#Kas-yra-React-Component-Driver">3. Kas yra React Component Driver?</a></li>
<li><a href="#Pana-s-rankiai">4. Panašūs įrankiai</a></li>
<li><a href="#Istorija">5. Istorija</a></li>
<li><a href="#Ko-nedaro-React-Component-Driver">6. Ko nedaro React Component Driver</a></li>
<li><a href="#Demo-React-Test-Renderer">7. Demo: React Test Renderer</a></li>
<li><a href="#Komponento-Evoliucija">8. Komponento Evoliucija</a></li>
<li><a href="#Demo-React-Component-Driver">9. Demo: React Component Driver</a></li>
<li><a href="#Ateities-Vizija">10. Ateities Vizija</a></li>
<li><a href="#Dokumentacija">11. Dokumentacija</a></li>
<li><a href="#REPL">12. REPL</a></li>
</ul>
</div>
</div>

<div id="outline-container-React-Component-Driver" class="outline-2">
<h2 id="React-Component-Driver"><span class="section-number-2">1.</span> <a href="#React-Component-Driver">React Component Driver</a></h2>
<div class="outline-text-2" id="text-1">
<p>
(╯°□°)╯︵ ┻━┻
</p>
</div>
</div>

<div id="outline-container-Agenda" class="outline-2">
<h2 id="Agenda"><span class="section-number-2">2.</span> <a href="#Agenda">Agenda</a></h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>Istorija</li>

<li>Demo: Read Test Renderer</li>

<li>Demo: React Component Driver <del>ir TDD</del></li>

<li>Ateities Vizija</li>
</ul>
</div>
</div>

<div id="outline-container-Kas-yra-React-Component-Driver" class="outline-2">
<h2 id="Kas-yra-React-Component-Driver"><span class="section-number-2">3.</span> <a href="#Kas-yra-React-Component-Driver">Kas yra React Component Driver?</a></h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><a href="https://reactjs.org/docs/test-renderer.html">React Test Renderer</a> apvalkalas.</li>

<li>Įrankių rinkinys leidžiantis analizuoti komponentų medį.

<ul class="org-ul">
<li>Konstravimas: render, renderComponent, &#x2026;</li>

<li>Užklausos: filterBy, getTextNodes, &#x2026;</li>
</ul></li>

<li>Test Driver konvencija.

<ul class="org-ul">
<li>Paslepia komplikuotą konstravimą, manipuliavimą.</li>

<li>Pasakoja istoriją.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-Pana-s-rankiai" class="outline-2">
<h2 id="Pana-s-rankiai"><span class="section-number-2">4.</span> <a href="#Pana-s-rankiai">Panašūs įrankiai</a></h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li><a href="https://github.com/enzymejs/enzyme">Enzyme</a></li>

<li><a href="https://github.com/testing-library/native-testing-library">React Testing Library</a></li>
</ul>
</div>
</div>

<div id="outline-container-Istorija" class="outline-2">
<h2 id="Istorija"><span class="section-number-2">5.</span> <a href="#Istorija">Istorija</a></h2>
<div class="outline-text-2" id="text-5">
<pre class="example" id="org4e7db99">
commit 93e02b2044d3f82ac7526449ec72ca7acd088840
Author: Donatas Petrauskas &lt;donatasp@wix.com&gt;
Date:   Mon Nov 21 16:17:19 2016 +0200

  Try to include custom built testkit.
</pre>
</div>
</div>

<div id="outline-container-Ko-nedaro-React-Component-Driver" class="outline-2">
<h2 id="Ko-nedaro-React-Component-Driver"><span class="section-number-2">6.</span> <a href="#Ko-nedaro-React-Component-Driver">Ko nedaro React Component Driver</a></h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>Nevykdo native kodo. Tam skirtas <a href="https://github.com/wix/detox">Detox</a>.</li>

<li>Nepalengvina testų rašymo.</li>
</ul>
</div>
</div>

<div id="outline-container-Demo-React-Test-Renderer" class="outline-2">
<h2 id="Demo-React-Test-Renderer"><span class="section-number-2">7.</span> <a href="#Demo-React-Test-Renderer">Demo: React Test Renderer</a></h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li>Importavimas</li>

<li>Renderer objektas</li>

<li>Komponentų medis</li>

<li>Komponento evoliucija</li>
</ul>
</div>
</div>

<div id="outline-container-Komponento-Evoliucija" class="outline-2">
<h2 id="Komponento-Evoliucija"><span class="section-number-2">8.</span> <a href="#Komponento-Evoliucija">Komponento Evoliucija</a></h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<pre class="src src-js">function Counter() {
  const [count, setCount] = React.useState(0);
  return (&lt;button onClick={() =&gt; setCount(count + 1)}&gt;Count is {count}&lt;/button&gt;);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-Demo-React-Component-Driver" class="outline-2">
<h2 id="Demo-React-Component-Driver"><span class="section-number-2">9.</span> <a href="#Demo-React-Component-Driver">Demo: React Component Driver</a></h2>
<div class="outline-text-2" id="text-9">
<ul class="org-ul">
<li>Užklausos</li>

<li><code>ComponentDriver</code></li>
</ul>
</div>
</div>

<div id="outline-container-Ateities-Vizija" class="outline-2">
<h2 id="Ateities-Vizija"><span class="section-number-2">10.</span> <a href="#Ateities-Vizija">Ateities Vizija</a></h2>
</div>

<div id="outline-container-Dokumentacija" class="outline-2">
<h2 id="Dokumentacija"><span class="section-number-2">11.</span> <a href="#Dokumentacija">Dokumentacija</a></h2>
<div class="outline-text-2" id="text-11">
<p>
<a href="https://github.com/wix-incubator/react-component-driver/blob/master/react-component-driver/README.org">React Component Driver</a>
</p>
</div>
</div>
<div id="outline-container-REPL" class="outline-2">
<h2 id="REPL"><span class="section-number-2">12.</span> <a href="#REPL">REPL</a></h2>
<div class="outline-text-2" id="text-12">
<pre class="example" id="orgccce81c">
babel &gt; const React = require('react')
undefined
babel &gt; const {create} = require('react-test-renderer')
undefined
babel &gt; const pp = (x) =&gt; console.log(JSON.stringify(x, null, 2))
undefined
babel &gt; create(&lt;div /&gt;).toJSON()
{ type: 'div', props: {}, children: null }
babel &gt; create(&lt;div id="app" /&gt;).toJSON()
{ type: 'div', props: { id: 'app' }, children: null }
babel &gt; create(&lt;div&gt;Hello, World!&lt;/div&gt;).toJSON()
{ type: 'div', props: {}, children: [ 'Hello, World!' ] }
babel &gt; pp(create(&lt;div&gt;&lt;span&gt;Hello, World!&lt;/span&gt;&lt;button/&gt;&lt;/div&gt;).toJSON())
{
  "type": "div",
  "props": {},
  "children": [
    {
      "type": "span",
      "props": {},
      "children": [
        "Hello, World!"
      ]
    },
    {
      "type": "button",
      "props": {},
      "children": null
    }
  ]
}
undefined
babel &gt; const onClick = () =&gt; console.log('Hello!')
undefined
babel &gt; const button = create(&lt;button onClick={onClick}&gt;Click Me!&lt;/button&gt;).toJSON()
undefined
babel &gt; button.props.onClick()
Hello!
undefined
babel &gt; function Counter() {
  const [count, setCount] = React.useState(0);
  return (&lt;button onClick={() =&gt; setCount(count + 1)}&gt;Count is {count}&lt;/button&gt;);
}
undefined
babel &gt; const renderer = create(&lt;Counter /&gt;)
undefined
babel &gt; renderer.toJSON()
{
  type: 'button',
  props: { onClick: [Function: onClick] },
  children: [ 'Count is ', '0' ]
}
babel &gt; renderer.toJSON().props.onClick()
undefined
babel &gt; renderer.toJSON()
{
  type: 'button',
  props: { onClick: [Function: onClick] },
  children: [ 'Count is ', '1' ]
}
babel &gt; const RCD = require('react-component-driver')
undefined
babel &gt; RCD
{
  withContext: [Function: withContext],
  ComponentDriver: [Function: ComponentDriver],
  componentDriver: [Function: factory],
  render: [Function: render],
  renderComponent: [Function: renderComponent],
  toJSON: [Function: toJSON],
  filterBy: [Function: filterBy],
  filterByTestID: [Function: filterByTestID],
  filterByType: [Function: filterByType],
  getTextNodes: [Function: getTextNodes]
}
babel &gt; const {filterByTestID, filterBy, getTextNodes, renderComponent, toJSON, ComponentDriver} = RCD
undefined
babel &gt; renderComponent(Counter, {}).toJSON()
{
  type: 'button',
  props: { onClick: [Function: onClick] },
  children: [ 'Count is ', '0' ]
}
babel &gt; toJSON(renderComponent(Counter, {}))
{
  type: 'button',
  props: { onClick: [Function] },
  children: [ 'Count is ', '0' ]
}
babel &gt; function Counter() {
  const [count, setCount] = React.useState(0);
  return (
    &lt;div&gt;
      &lt;div testID="COUNT"&gt;{count}&lt;/div&gt;
      &lt;button testID="COUNTER_BUTTON" onClick={() =&gt; setCount(count + 1)}&gt;+&lt;/button&gt;
    &lt;/div&gt;
  );
}
undefined
babel &gt; const r = renderComponent(Counter, {})
undefined
babel &gt; const x = toJSON(r)
undefined
babel &gt; pp(x)
{
  "type": "div",
  "props": {},
  "children": [
    "       ",
    {
      "type": "div",
      "props": {
        "testID": "COUNT"
      },
      "children": [
        "0"
      ]
    },
    "       ",
    {
      "type": "button",
      "props": {
        "testID": "COUNTER_BUTTON"
      },
      "children": [
        "+"
      ]
    },
    "     "
  ]
}
undefined
babel &gt; filterByTestID('COUNT', x)
[ { type: 'div', props: { testID: 'COUNT' }, children: [ '0' ] } ]
babel &gt; filterByTestID('X', x)
[]
babel &gt; getTextNodes(filterByTestID('COUNT', x))
[ '0' ]
babel &gt; filterByTestID('COUNTER_BUTTON', x)[0].props.onClick()
undefined
babel &gt; pp(filterByTestID('COUNT', toJSON(r)))
[
  {
    "type": "div",
    "props": {
      "testID": "COUNT"
    },
    "children": [
      "1"
    ]
  }
]
undefined
babel &gt; const CounterDriver = class extends ComponentDriver {
  constructor() {
    super(Counter);
  }

  clickPlusButton() {
    this.getByID('COUNTER_BUTTON').props.onClick();
    return this;
  }

  getCount() {
    return this.getByID('COUNT').children[0];
  }
}
undefined
babel &gt; new CounterDriver().clickPlusButton().clickPlusButton().getCount()
'2'
babel &gt;
</pre>
</div>
</div>
</div>
<div id="postamble" class="status">
<nav id="navigation">
  <ul>
    <li><a href="../index.html">Index</a></li>
    <li>&middot;</li>
    <li><a href="https://github.com/dop">GitHub</a></li>
    <li><a href="https://gitlab.com/setq">GitLab</a></li>
    <li><a href="https://twitter.com/donatas_p">Twitter</a></li>
  </ul>
</nav>
</div>
</body>
</html>
